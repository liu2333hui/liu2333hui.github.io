System.register("chunks:///_virtual/a_algorithm_v2.copy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./solver.ts","./helper.ts","./common.ts"],(function(t){"use strict";var i,r,e,s,h,n,a,o;return{setters:[function(t){i=t.inheritsLoose},function(t){r=t.cclegacy},function(t){e=t.solver},function(t){s=t.manhattan,h=t.getDirectionBetweenNodes,n=t.get8Neighbor},function(t){a=t.方,o=t.STATES}],execute:function(){r._RF.push({},"1875d4ZSTFCwbKrSMU5YfRS","a_algorithm_v2.copy",void 0);t("a_algorithm_v2",function(t){function r(){var i;return(i=t.call(this)||this).curr_min_cost=void 0,i.congestion_array=void 0,i.parentNode=void 0,i.backtrack_array=void 0,i.b_x=void 0,i.b_y=void 0,i.prev_direction=void 0,i.state=o.START,i}i(r,t);var e=r.prototype;return e.isObstruction=function(t){var i=t[0],r=t[1];if(i<0||r<0||i>=this.netlist_info.grid_size[0]||r>=this.netlist_info.grid_size[1])return!0;var e=this.grid[t[1]][t[0]];return 0!=e&&e!=this.currentWire+1},e.a_algorithm_cost=function(t){return this.step_number+s(t,this.currentTarget)},e.a_algorithm_v2_cost=function(t){var i=0;this.grid[t[1]][t[0]]==this.currentWire+1&&(i=-10);var r=0,e=[this.parentNode[0],this.parentNode[1]],s=h(e,t),o=e[0],c=e[1],_=t[0],u=t[1],d=[];s==a.下||s==a.上?d=[[o+1,c],[o-1,c],[o+1,u],[o-1,u]]:(s==a.右||s==a.左)&&(d=[[o,c+1],[o,c-1],[_,c+1],[_,c-1]]);for(var g=0;g<d.length;g++)this.isObstruction(d[g])&&r++;for(var l=-5,p=n(t),m=0;m<p.length;m++){var v=p[m];if(this.isObstruction(v)){l=0;break}}return this.a_algorithm_cost(t)+i+3*(4-r)+l+10},e.getEmptyArray=function(){for(var t=[],i=this.grid[0].length,r=this.grid.length,e=0;e<r;e++){for(var s=[],h=0;h<i;h++)s.push(0);t.push(s)}return t},e.step_entire=function(){switch(this.state){case o.RIPUP_WIRES:var i=t.prototype.ripup_step.call(this);this.state=i?o.END:o.RE_ROUTE_WIRES;break;case o.START:t.prototype.reload_routes.call(this);case o.RE_ROUTE_WIRES:this.failed_routes=[],this.resetGrid(),this.currentRoute=0;case o.SELECT_NEW_ROUTE:if(this.currentRoute>=this.all_routes.length)console.log("Done 1 round"),this.ripup_flag?this.state=o.RIPUP_WIRES:this.state=o.END;else{var r=this.all_routes[this.routing_order[this.currentRoute]];this.currentWire=r[0],this.currentSource=r[2],this.currentTarget=r[3],this.backtrack_array=this.getEmptyArray(),this.emptyIntermediateGrid(),this.step_number=1,this.parentNode=[this.currentSource[0],this.currentSource[1]];var e=this.a_algorithm_v2_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=e,this.curr_min_cost=e,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource),this.step_number++,this.state=o.FIND_ROUTE}break;case o.FIND_ROUTE:for(var s=9999999999,h=this.expansion_list.length,n=0;n<h;n++){var a=this.expansion_list.shift(),c=a[0],_=a[1];if(this.parentNode=[c,_],this.grid_intermediate[_][c]>this.curr_min_cost)this.grid_intermediate[_][c]<s&&(s=this.grid_intermediate[_][c]),this.expansion_list.push(a);else for(var u=[[c,_+1],[c,_-1],[c+1,_],[c-1,_]],d=0;d<u.length;d++){var g=u[d][0],l=u[d][1];if(g==this.currentTarget[0]&&l==this.currentTarget[1])return this.grid_intermediate[l][g]=this.step_number,this.b_x=g,this.b_y=l,this.backtrack_array[l][g]=a,void(this.state=o.BACKTRACE);if(!(g<0||l<0||g>=this.netlist_info.grid_size[0]||l>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[l][g]&&0==this.grid[l][g]||this.grid[l][g]==this.currentWire+1&&0==this.grid_intermediate[l][g])){this.expansion_list.push(u[d]);var p=this.a_algorithm_v2_cost(u[d]);this.grid_intermediate[l][g]=p,p<s&&(s=p),this.backtrack_array[l][g]=a}}}this.step_number++,this.curr_min_cost=s,0==this.expansion_list.length&&(t.prototype.failed_path_step.call(this),this.state=o.SELECT_NEW_ROUTE,this.currentRoute++);break;case o.BACKTRACE:var m=this.b_x,v=this.b_y,f=this.backtrack_array[v][m],b=f[1],E=f[0];(this.grid[b][E]==this.currentWire+1||E==this.currentSource[0]&&b==this.currentSource[1])&&(this.state=o.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[b][E]=this.currentWire+1,this.b_x=E,this.b_y=b;break;case o.END:}},e.selectnewroute_hook=function(){this.backtrack_array=this.getEmptyArray(),this.parentNode=[this.currentSource[0],this.currentSource[1]];var t=this.a_algorithm_v2_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=t,this.curr_min_cost=t,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource)},e.findroute_hook=function(){for(var t=9999999999,i=this.expansion_list.length,r=0;r<i;r++){var e=this.expansion_list.shift(),s=e[0],h=e[1];if(this.parentNode=[s,h],this.grid_intermediate[h][s]>this.curr_min_cost)this.grid_intermediate[h][s]<t&&(t=this.grid_intermediate[h][s]),this.expansion_list.push(e);else for(var n=[[s,h+1],[s,h-1],[s+1,h],[s-1,h]],a=0;a<n.length;a++){var c=n[a][0],_=n[a][1];if(c==this.currentTarget[0]&&_==this.currentTarget[1])return this.grid_intermediate[_][c]=this.step_number,this.b_x=c,this.b_y=_,this.backtrack_array[_][c]=e,void(this.state=o.BACKTRACE);if(!(c<0||_<0||c>=this.netlist_info.grid_size[0]||_>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[_][c]&&0==this.grid[_][c]||this.grid[_][c]==this.currentWire+1&&0==this.grid_intermediate[_][c])){this.expansion_list.push(n[a]);var u=this.a_algorithm_v2_cost(n[a]);this.grid_intermediate[_][c]=u,u<t&&(t=u),this.backtrack_array[_][c]=e}}}this.curr_min_cost=t},e.backtrace_hook=function(){var t=this.b_x,i=this.b_y,r=this.backtrack_array[i][t],e=r[1],s=r[0];(this.grid[e][s]==this.currentWire+1||s==this.currentSource[0]&&e==this.currentSource[1])&&(this.state=o.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[e][s]=this.currentWire+1,this.b_x=s,this.b_y=e},e.end_hook=function(){},e.getName=function(){return"AStarV2"},r}(e));r._RF.pop()}}}));

System.register("chunks:///_virtual/a_algorithm_v2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./solver.ts","./helper.ts","./common.ts"],(function(t){"use strict";var i,r,e,s,h,a,n,c;return{setters:[function(t){i=t.inheritsLoose},function(t){r=t.cclegacy},function(t){e=t.solver},function(t){s=t.manhattan,h=t.getDirectionBetweenNodes,a=t.get8Neighbor},function(t){n=t.方,c=t.STATES}],execute:function(){r._RF.push({},"27877WzzRhOB5tvFiQVAuKp","a_algorithm_v2",void 0);t("a_algorithm_v2",function(t){function r(){var i;return(i=t.call(this)||this).curr_min_cost=void 0,i.congestion_array=void 0,i.parentNode=void 0,i.backtrack_array=void 0,i.backtrack_step=void 0,i.b_x=void 0,i.b_y=void 0,i.prev_direction=void 0,i.state=c.START,i}i(r,t);var e=r.prototype;return e.isObstruction=function(t){var i=t[0],r=t[1];if(i<0||r<0||i>=this.netlist_info.grid_size[0]||r>=this.netlist_info.grid_size[1])return!0;var e=this.grid[t[1]][t[0]];return 0!=e&&e!=this.currentWire+1},e.a_algorithm_cost=function(t){this.backtrack_step[t[1]][t[0]];return this.step_number+s(t,this.currentTarget)},e.a_algorithm_v2_cost=function(t){var i=0;this.grid[t[1]][t[0]]==this.currentWire+1&&(i=-10);var r=0,e=[this.parentNode[0],this.parentNode[1]],s=h(e,t),c=e[0],o=e[1],_=t[0],u=t[1],d=[];s==n.下||s==n.上?d=[[c+1,o],[c-1,o],[c+1,u],[c-1,u]]:(s==n.右||s==n.左)&&(d=[[c,o+1],[c,o-1],[_,o+1],[_,o-1]]);for(var g=0;g<d.length;g++)this.isObstruction(d[g])&&r++;for(var l=-5,p=a(t),v=0;v<p.length;v++){var k=p[v];if(this.isObstruction(k)){l=0;break}}return this.a_algorithm_cost(t)+i+3*(4-r)+l+10},e.getEmptyArray=function(){for(var t=[],i=this.grid[0].length,r=this.grid.length,e=0;e<r;e++){for(var s=[],h=0;h<i;h++)s.push(0);t.push(s)}return t},e.step_entire=function(){switch(this.state){case c.RIPUP_WIRES:var i=t.prototype.ripup_step.call(this);this.state=i?c.END:c.RE_ROUTE_WIRES;break;case c.START:t.prototype.reload_routes.call(this);case c.RE_ROUTE_WIRES:this.failed_routes=[],this.resetGrid(),this.currentRoute=0;case c.SELECT_NEW_ROUTE:if(this.currentRoute>=this.all_routes.length)console.log("Done 1 round"),this.ripup_flag?this.state=c.RIPUP_WIRES:this.state=c.END;else{var r=this.all_routes[this.routing_order[this.currentRoute]];this.currentWire=r[0],this.currentSource=r[2],this.currentTarget=r[3],this.backtrack_array=this.getEmptyArray(),this.emptyIntermediateGrid(),this.step_number=1,this.parentNode=[this.currentSource[0],this.currentSource[1]];var e=this.a_algorithm_v2_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=e,this.curr_min_cost=e,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource),this.step_number++,this.state=c.FIND_ROUTE}break;case c.FIND_ROUTE:for(var s=9999999999,h=this.expansion_list.length,a=0;a<h;a++){var n=this.expansion_list.shift(),o=n[0],_=n[1];if(this.parentNode=[o,_],this.grid_intermediate[_][o]>this.curr_min_cost)this.grid_intermediate[_][o]<s&&(s=this.grid_intermediate[_][o]),this.expansion_list.push(n);else for(var u=[[o,_+1],[o,_-1],[o+1,_],[o-1,_]],d=0;d<u.length;d++){var g=u[d][0],l=u[d][1];if(g==this.currentTarget[0]&&l==this.currentTarget[1])return this.grid_intermediate[l][g]=this.step_number,this.b_x=g,this.b_y=l,this.backtrack_array[l][g]=n,void(this.state=c.BACKTRACE);if(!(g<0||l<0||g>=this.netlist_info.grid_size[0]||l>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[l][g]&&0==this.grid[l][g]||this.grid[l][g]==this.currentWire+1&&0==this.grid_intermediate[l][g])){this.expansion_list.push(u[d]);var p=this.a_algorithm_v2_cost(u[d]);this.grid_intermediate[l][g]=p,p<s&&(s=p),this.backtrack_array[l][g]=n}}}this.step_number++,this.curr_min_cost=s,0==this.expansion_list.length&&(t.prototype.failed_path_step.call(this),this.state=c.SELECT_NEW_ROUTE,this.currentRoute++);break;case c.BACKTRACE:var v=this.b_x,k=this.b_y,m=this.backtrack_array[k][v],b=m[1],f=m[0];(this.grid[b][f]==this.currentWire+1||f==this.currentSource[0]&&b==this.currentSource[1])&&(this.state=c.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[b][f]=this.currentWire+1,this.b_x=f,this.b_y=b;break;case c.END:}},e.selectnewroute_hook=function(){this.backtrack_array=this.getEmptyArray(),this.backtrack_step=this.getEmptyArray(),this.backtrack_step[this.currentSource[1]][this.currentSource[0]]=1,this.backtrack_array[this.currentSource[1]][this.currentSource[0]]=this.currentSource,this.parentNode=[this.currentSource[0],this.currentSource[1]];var t=this.a_algorithm_v2_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=t,this.curr_min_cost=t,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource)},e.findroute_hook=function(){for(var t=9999999999,i=this.expansion_list.length,r=0;r<i;r++){var e=this.expansion_list.shift(),s=e[0],h=e[1];if(this.parentNode=[s,h],this.grid_intermediate[h][s]>this.curr_min_cost)this.grid_intermediate[h][s]<t&&(t=this.grid_intermediate[h][s]),this.expansion_list.push(e);else for(var a=[[s,h+1],[s,h-1],[s+1,h],[s-1,h]],n=0;n<a.length;n++){var o=a[n][0],_=a[n][1];if(o==this.currentTarget[0]&&_==this.currentTarget[1]){this.backtrack_array[_][o]=e,this.backtrack_step[_][o]=this.backtrack_step[e[1]][e[0]]+1;var u=this.a_algorithm_v2_cost(this.currentTarget);return this.grid_intermediate[_][o]=u,this.b_x=o,this.b_y=_,this.backtrack_array[_][o]=e,this.backtrack_step[_][o]=this.backtrack_step[e[1]][e[0]]+1,void(this.state=c.BACKTRACE)}if(!(o<0||_<0||o>=this.netlist_info.grid_size[0]||_>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[_][o]&&0==this.grid[_][o]||this.grid[_][o]==this.currentWire+1&&0==this.grid_intermediate[_][o])){this.backtrack_array[_][o]=e,this.backtrack_step[_][o]=this.backtrack_step[e[1]][e[0]]+1,this.expansion_list.push(a[n]);var d=this.a_algorithm_v2_cost(a[n]);this.grid_intermediate[_][o]=d,d<t&&(t=d)}}}this.curr_min_cost=t},e.backtrace_hook=function(){var t=this.b_x,i=this.b_y,r=this.backtrack_array[i][t],e=r[1],s=r[0];(this.grid[e][s]==this.currentWire+1||s==this.currentSource[0]&&e==this.currentSource[1])&&(this.state=c.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[e][s]=this.currentWire+1,this.b_x=s,this.b_y=e},e.end_hook=function(){},e.getName=function(){return"AStarV2"},r}(e));r._RF.pop()}}}));

System.register("chunks:///_virtual/a_algorithm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./solver.ts","./helper.ts","./common.ts"],(function(t){"use strict";var i,r,s,e,a;return{setters:[function(t){i=t.inheritsLoose},function(t){r=t.cclegacy},function(t){s=t.solver},function(t){e=t.manhattan},function(t){a=t.STATES}],execute:function(){r._RF.push({},"388f1KrE0lNcYZpgmCrEE0G","a_algorithm",void 0);t("a_algorithm",function(t){function r(){var i;return(i=t.call(this)||this).expansion_list=void 0,i.curr_min_cost=void 0,i.backtrack_array=void 0,i.backtrack_step=void 0,i.b_x=void 0,i.b_y=void 0,i.prev_direction=void 0,i.state=a.START,i}i(r,t);var s=r.prototype;return s.a_algorithm_cost=function(t){return this.backtrack_step[t[1]][t[0]]+e(t,this.currentTarget)},s.step_entire=function(){switch(this.state){case a.RIPUP_WIRES:var i=t.prototype.ripup_step.call(this);this.state=i?a.END:a.RE_ROUTE_WIRES;break;case a.START:t.prototype.reload_routes.call(this);case a.RE_ROUTE_WIRES:this.failed_routes=[],this.resetGrid(),this.currentRoute=0;case a.SELECT_NEW_ROUTE:if(this.currentRoute>=this.all_routes.length)console.log("Done 1 round"),this.ripup_flag?this.state=a.RIPUP_WIRES:this.state=a.END;else{var r=this.all_routes[this.routing_order[this.currentRoute]];this.currentWire=r[0],this.currentSource=r[2],this.currentTarget=r[3],this.emptyIntermediateGrid(),this.step_number=1;var s=this.a_algorithm_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=s,this.curr_min_cost=s,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource),this.step_number++,this.backtrack_array=this.getEmptyArray(),this.backtrack_step=this.getEmptyArray(),this.state=a.FIND_ROUTE}break;case a.FIND_ROUTE:for(var e=9999999999,h=this.expansion_list.length,c=0;c<h;c++){var n=this.expansion_list.shift(),_=n[0],o=n[1];if(this.grid_intermediate[o][_]>this.curr_min_cost)this.grid_intermediate[o][_]<e&&(e=this.grid_intermediate[o][_]),this.expansion_list.push(n);else for(var u=[[_,o+1],[_,o-1],[_+1,o],[_-1,o]],d=0;d<u.length;d++){var g=u[d][0],l=u[d][1];if(g==this.currentTarget[0]&&l==this.currentTarget[1])return this.grid_intermediate[l][g]=this.step_number,this.b_x=g,this.b_y=l,this.backtrack_array[l][g]=n,this.backtrack_step[l][g]=this.backtrack_step[n[1]][n[0]],void(this.state=a.BACKTRACE);if(!(g<0||l<0||g>=this.netlist_info.grid_size[0]||l>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[l][g]&&0==this.grid[l][g]||this.grid[l][g]==this.currentWire+1&&0==this.grid_intermediate[l][g])){this.expansion_list.push(u[d]);var p=this.a_algorithm_cost(u[d]);this.grid_intermediate[l][g]=p,p<e&&(e=p),this.backtrack_array[l][g]=n,this.backtrack_step[l][g]=this.backtrack_step[n[1]][n[0]]}}}this.step_number++,this.curr_min_cost=e,0==this.expansion_list.length&&(t.prototype.failed_path_step.call(this),this.state=a.SELECT_NEW_ROUTE,this.currentRoute++);break;case a.BACKTRACE:var k=this.b_x,m=this.b_y,b=this.backtrack_array[m][k],E=b[1],f=b[0];(this.grid[E][f]==this.currentWire+1||f==this.currentSource[0]&&E==this.currentSource[1])&&(this.state=a.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[E][f]=this.currentWire+1,this.b_x=f,this.b_y=E;break;case a.END:}},s.selectnewroute_hook=function(){this.backtrack_array=this.getEmptyArray(),this.backtrack_step=this.getEmptyArray(),this.backtrack_step[this.currentSource[1]][this.currentSource[0]]=1,this.backtrack_array[this.currentSource[1]][this.currentSource[0]]=this.currentSource;var t=this.a_algorithm_cost(this.currentSource);this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=t,this.curr_min_cost=t,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource)},s.findroute_hook=function(){for(var t=9999999999,i=this.expansion_list.length,r=0;r<i;r++){var s=this.expansion_list.shift(),e=s[0],h=s[1];if(this.grid_intermediate[h][e]>this.curr_min_cost)this.grid_intermediate[h][e]<t&&(t=this.grid_intermediate[h][e]),this.expansion_list.push(s);else for(var c=[[e,h+1],[e,h-1],[e+1,h],[e-1,h]],n=0;n<c.length;n++){var _=c[n][0],o=c[n][1];if(_==this.currentTarget[0]&&o==this.currentTarget[1]){this.backtrack_array[o][_]=s,this.backtrack_step[o][_]=this.backtrack_step[s[1]][s[0]]+1;var u=this.a_algorithm_cost(this.currentTarget);return this.grid_intermediate[o][_]=u,this.b_x=_,this.b_y=o,void(this.state=a.BACKTRACE)}if(!(_<0||o<0||_>=this.netlist_info.grid_size[0]||o>=this.netlist_info.grid_size[1])&&(0==this.grid_intermediate[o][_]&&0==this.grid[o][_]||this.grid[o][_]==this.currentWire+1&&0==this.grid_intermediate[o][_])){this.backtrack_array[o][_]=s,this.backtrack_step[o][_]=this.backtrack_step[s[1]][s[0]]+1,this.expansion_list.push(c[n]);var d=this.a_algorithm_cost(c[n]);this.grid_intermediate[o][_]=d,d<t&&(t=d)}}}this.curr_min_cost=t},s.backtrace_hook=function(){var t=this.b_x,i=this.b_y,r=this.backtrack_array[i][t],s=r[1],e=r[0];(this.grid[s][e]==this.currentWire+1||e==this.currentSource[0]&&s==this.currentSource[1])&&(this.state=a.SELECT_NEW_ROUTE,this.currentRoute++),this.grid[s][e]=this.currentWire+1,this.b_x=e,this.b_y=s},s.end_hook=function(){},s.getName=function(){return"AStarV1"},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/common.ts",["cc"],(function(E){"use strict";var R;return{setters:[function(E){R=E.cclegacy}],execute:function(){var T,_;E({STATES:void 0,"方":void 0}),R._RF.push({},"b09aaFIACVJOLLB55A5TG1K","common",void 0),function(E){E[E.START=0]="START",E[E.RE_ROUTE_WIRES=1]="RE_ROUTE_WIRES",E[E.FIND_ROUTE=2]="FIND_ROUTE",E[E.SELECT_NEW_ROUTE=3]="SELECT_NEW_ROUTE",E[E.BACKTRACE=4]="BACKTRACE",E[E.END=5]="END",E[E.RIPUP_WIRES=6]="RIPUP_WIRES",E[E.PRE_END=7]="PRE_END"}(T||(T=E("STATES",{}))),function(E){E[E["上"]=0]="上",E[E["下"]=1]="下",E[E["左"]=2]="左",E[E["右"]=3]="右",E[E["中"]=4]="中"}(_||(_=E("方",{}))),R._RF.pop()}}}));

System.register("chunks:///_virtual/grid_structure.ts",["cc"],(function(r){"use strict";var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){r({create_grid:function(r){for(var e=[],t=0;t<r.grid_size[1];t++){for(var o=[],s=0;s<r.grid_size[0];s++)o.push(0);e.push(o)}for(var n=0;n<r.obstructions_size;n++){var i=r.obstructions[n],u=i[0],c=i[1];e[c][u]=-1}for(var g=0;g<r.wires_size;g++)for(var a=r.wires[g].length,l=0;l<a;l++){var v=r.wires[g][l],f=v[0],_=v[1];e[_][f]=g+1}return e},print_grid:function(r){for(var e=0;e<r.length;e++){for(var t=r[e],o=0;o<t.length;o++){var s=String(t[o]);s.length<2&&console.log(0),console.log(s),console.log(" ")}console.log("\n")}}}),e._RF.push({},"34b32uRXh1PuYaNLnjAWuBm","grid_structure",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/helper.ts",["cc","./common.ts"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.方}],execute:function(){t({get8Neighbor:function(t){var e=t[0],n=t[1];return[[e,n+1],[e,n-1],[e+1,n],[e-1,n],[e+1,n+1],[e+1,n-1],[e-1,n+1],[e-1,n-1]]},getDirectionBetweenNodes:function(t,e){var r;r=t[0]+1==e[0]?n.右:t[0]-1==e[0]?n.左:t[1]+1==e[1]?n.下:t[1]-1==e[1]?n.上:n.中;return r},getNeighbor:function(t,e){void 0===e&&(e=n.下);var r,c=t[0],u=t[1];r=e==n.下?[[c,u+1],[c,u-1],[c+1,u],[c-1,u]]:e==n.上?[[c,u-1],[c,u+1],[c+1,u],[c-1,u]]:e==n.右?[[c+1,u],[c-1,u],[c,u+1],[c,u-1]]:[[c-1,u],[c+1,u],[c,u+1],[c,u-1]];return r},manhattan:function(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])}}),e._RF.push({},"78b37g1FaJAypaP2450T2pW","helper",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/lee_moore.old.ts",["./rollupPluginModLoBabelHelpers.js","cc","./solver.ts","./helper.ts","./common.ts"],(function(t){"use strict";var i,e,r,s,n,h;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.solver},function(t){s=t.getNeighbor},function(t){n=t.STATES,h=t.方}],execute:function(){e._RF.push({},"912936UReJPu4yrmSRqLrq9","lee_moore.old",void 0);t("lee_moore",function(t){function e(){var i;return(i=t.call(this)||this).expansion_list=void 0,i.b_x=void 0,i.b_y=void 0,i.prev_direction=void 0,i.state=n.START,i}i(e,t);var r=e.prototype;return r.restart=function(){this.state=n.START,t.prototype.clearIntermediateGrid.call(this)},r.step=function(){switch(this.state){case n.START:this.currentWire=0,this.currentRoute=1;case n.SELECT_NEW_ROUTE:if(this.currentRoute>=this.netlist_info.wires[this.currentWire].length&&(this.currentWire++,this.currentRoute=1),this.currentWire>=this.netlist_info.wires_size)this.state=n.END;else{var t=this.netlist_info.wires[this.currentWire];this.currentSource=t[0],this.currentTarget=t[this.currentRoute],this.emptyIntermediateGrid(),this.step_number=1,this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=this.step_number,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource),this.step_number++,this.state=n.FIND_ROUTE}break;case n.FIND_ROUTE:for(var i=this.expansion_list.length,e=0;e<i;e++)for(var r=this.expansion_list.shift(),o=(r[0],r[1],s(r)),u=0;u<o.length;u++){var _=o[u][0],c=o[u][1];if(_==this.currentTarget[0]&&c==this.currentTarget[1])return this.grid_intermediate[c][_]=this.step_number,this.b_x=_,this.b_y=c,this.expansion_list=[],void(this.state=n.BACKTRACE);_<0||c<0||_>=this.netlist_info.grid_size[0]||c>=this.netlist_info.grid_size[1]||(0==this.grid_intermediate[c][_]&&0==this.grid[c][_]||this.grid[c][_]==this.currentWire+1&&0==this.grid_intermediate[c][_])&&(this.expansion_list.push(o[u]),this.grid_intermediate[c][_]=this.step_number)}this.step_number++,0==this.expansion_list.length&&(this.state=n.SELECT_NEW_ROUTE,this.currentRoute++);break;case n.BACKTRACE:var a,d=this.b_x,l=this.b_y,p=this.grid_intermediate[l][d];a=s([d,l],this.prev_direction);for(var g=0;g<a.length;g++){var f=a[g][0],v=a[g][1];if(!(f<0||v<0||f>=this.netlist_info.grid_size[0]||v>=this.netlist_info.grid_size[1])&&this.grid_intermediate[v][f]==p-1){if(this.grid[v][f]==this.currentWire+1)return this.state=n.SELECT_NEW_ROUTE,void this.currentRoute++;this.grid[v][f]=this.currentWire+1,this.b_x=f,this.b_y=v,this.b_x==d+1?this.prev_direction=h.右:this.b_x==d-1?this.prev_direction=h.左:this.b_x==l+1?this.prev_direction=h.下:this.prev_direction=h.上;break}}this.b_x==this.currentSource[0]&&this.b_y==this.currentSource[1]&&(this.state=n.SELECT_NEW_ROUTE,this.currentRoute++);break;case n.END:}},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/lee_moore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./solver.ts","./helper.ts","./common.ts"],(function(t){"use strict";var i,e,r,s,n,h;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.solver},function(t){s=t.getNeighbor},function(t){n=t.STATES,h=t.方}],execute:function(){e._RF.push({},"293e76enfRDHIyiwqpxhCNO","lee_moore",void 0);t("lee_moore",function(t){function e(){var i;return(i=t.call(this)||this).expansion_list=void 0,i.b_x=void 0,i.b_y=void 0,i.prev_direction=void 0,i.state=n.START,i}i(e,t);var r=e.prototype;return r.step_entire=function(){switch(this.state){case n.RIPUP_WIRES:var i=t.prototype.ripup_step.call(this);this.state=i?n.END:n.RE_ROUTE_WIRES;break;case n.START:t.prototype.reload_routes.call(this);case n.RE_ROUTE_WIRES:this.failed_routes=[],this.resetGrid(),this.currentRoute=0;case n.SELECT_NEW_ROUTE:if(this.currentRoute>=this.all_routes.length)this.ripup_flag?this.state=n.RIPUP_WIRES:this.state=n.END;else{var e=this.all_routes[this.routing_order[this.currentRoute]];this.currentWire=e[0],this.currentSource=e[2],this.currentTarget=e[3],this.emptyIntermediateGrid(),this.step_number=1,this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=this.step_number,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource),this.step_number++,this.state=n.FIND_ROUTE}break;case n.FIND_ROUTE:for(var r=this.expansion_list.length,_=0;_<r;_++)for(var o=this.expansion_list.shift(),u=(o[0],o[1],s(o)),a=0;a<u.length;a++){var c=u[a][0],d=u[a][1];if(c==this.currentTarget[0]&&d==this.currentTarget[1])return this.grid_intermediate[d][c]=this.step_number,this.b_x=c,this.b_y=d,this.expansion_list=[],void(this.state=n.BACKTRACE);c<0||d<0||c>=this.netlist_info.grid_size[0]||d>=this.netlist_info.grid_size[1]||(0==this.grid_intermediate[d][c]&&0==this.grid[d][c]||this.grid[d][c]==this.currentWire+1&&0==this.grid_intermediate[d][c])&&(this.expansion_list.push(u[a]),this.grid_intermediate[d][c]=this.step_number)}this.step_number++,0==this.expansion_list.length&&(t.prototype.failed_path_step.call(this),this.state=n.SELECT_NEW_ROUTE,this.currentRoute++);break;case n.BACKTRACE:var p,l=this.b_x,g=this.b_y,f=this.grid_intermediate[g][l];p=s([l,g],this.prev_direction);for(var b=0;b<p.length;b++){var E=p[b][0],v=p[b][1];if(!(E<0||v<0||E>=this.netlist_info.grid_size[0]||v>=this.netlist_info.grid_size[1])&&this.grid_intermediate[v][E]==f-1){if(this.grid[v][E]==this.currentWire+1)return this.state=n.SELECT_NEW_ROUTE,void this.currentRoute++;this.grid[v][E]=this.currentWire+1,this.b_x=E,this.b_y=v,this.b_x==l+1?this.prev_direction=h.右:this.b_x==l-1?this.prev_direction=h.左:this.b_x==g+1?this.prev_direction=h.下:this.prev_direction=h.上;break}}this.b_x==this.currentSource[0]&&this.b_y==this.currentSource[1]&&(this.state=n.SELECT_NEW_ROUTE,this.currentRoute++);break;case n.END:}},r.selectnewroute_hook=function(){this.grid_intermediate[this.currentSource[1]][this.currentSource[0]]=this.step_number,this.grid_intermediate[this.currentTarget[1]][this.currentTarget[0]]=9999,this.expansion_list=[],this.expansion_list.push(this.currentSource)},r.findroute_hook=function(){for(var t=this.expansion_list.length,i=0;i<t;i++)for(var e=this.expansion_list.shift(),r=(e[0],e[1],s(e)),h=0;h<r.length;h++){var _=r[h][0],o=r[h][1];if(_==this.currentTarget[0]&&o==this.currentTarget[1])return this.grid_intermediate[o][_]=this.step_number,this.b_x=_,this.b_y=o,this.expansion_list=[],void(this.state=n.BACKTRACE);_<0||o<0||_>=this.netlist_info.grid_size[0]||o>=this.netlist_info.grid_size[1]||(0==this.grid_intermediate[o][_]&&0==this.grid[o][_]||this.grid[o][_]==this.currentWire+1&&0==this.grid_intermediate[o][_])&&(this.expansion_list.push(r[h]),this.grid_intermediate[o][_]=this.step_number)}},r.backtrace_hook=function(){var t,i=this.b_x,e=this.b_y,r=this.grid_intermediate[e][i];t=s([i,e],this.prev_direction);for(var _=0;_<t.length;_++){var o=t[_][0],u=t[_][1];if(!(o<0||u<0||o>=this.netlist_info.grid_size[0]||u>=this.netlist_info.grid_size[1])&&this.grid_intermediate[u][o]==r-1){if(this.grid[u][o]==this.currentWire+1)return this.state=n.SELECT_NEW_ROUTE,void this.currentRoute++;this.grid[u][o]=this.currentWire+1,this.b_x=o,this.b_y=u,this.b_x==i+1?this.prev_direction=h.右:this.b_x==i-1?this.prev_direction=h.左:this.b_x==e+1?this.prev_direction=h.下:this.prev_direction=h.上;break}}this.b_x==this.currentSource[0]&&this.b_y==this.currentSource[1]&&(this.state=n.SELECT_NEW_ROUTE,this.currentRoute++)},r.end_hook=function(){},r.getName=function(){return"LeeMoore"},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./a_algorithm.ts","./a_algorithm_v2.copy.ts","./a_algorithm_v2.ts","./lee_moore.old.ts","./lee_moore.ts","./solver.ts","./netlist_grid.ts","./netlist_ui.ts","./main.ts","./common.ts","./grid_structure.ts","./helper.ts","./parser.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./parser.ts","./grid_structure.ts","./solver.ts","./lee_moore.ts","./a_algorithm.ts","./a_algorithm_v2.ts"],(function(t){"use strict";var e,i,o,s,n,r,l,a,c,u,h,g,p,m,d,f,v,y,I,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,l=t.Node,a=t.Label,c=t.Sprite,u=t.Color,h=t.Vec3,g=t.EditBox,p=t.resources,m=t.Component},function(t){d=t.parse},function(t){f=t.create_grid},function(t){v=t.solver},function(t){y=t.lee_moore},function(t){I=t.a_algorithm},function(t){_=t.a_algorithm_v2}],execute:function(){var S,b,C,N,w,F,U,k,G,z,L,x,B,R,A;n._RF.push({},"8a6b2X7JzFIkbAVF2yZkobD","main",void 0);var D=r.ccclass,M=r.property;t("Main",(S=D("main"),b=M(l),C=M(a),N=M(a),w=M(l),F=M(l),U=M(l),S((z=e((G=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,o(e,"GridBox",z,s(e)),o(e,"SolverName",L,s(e)),o(e,"NetlistName",x,s(e)),o(e,"LoadingIcon",B,s(e)),o(e,"StatUI",R,s(e)),o(e,"CustomNetlistUI",A,s(e)),e.netlist_name="benchmarks/stanley",e.mySolver=void 0,e.grid=void 0,e.result=void 0,e.startFlag=0,e.playIconFlag=void 0,e}i(e,t);var n=e.prototype;return n.start=function(){this.reload_solver({},"lee_moore"),this.LoadingIcon.getComponent(c).color=new u(255,255,255,0),this.StatUI.position=new h(0,100,0),this.StatUI.active=!1},n.update=function(t){this.playIconFlag?this.LoadingIcon.getComponent(c).color=new u(255,255,255,255):this.LoadingIcon.getComponent(c).color=new u(255,255,255,0)},n.setRipup=function(t,e){this.mySolver.setRipup(t._isChecked)},n.setInsinkRouting=function(t,e){this.mySolver.setInsinkRouting(t._isChecked)},n.preClick=function(){this.StatUI.active=!1},n.restart=function(){this.preClick(),0!=this.startFlag?(this.grid=f(this.result),this.mySolver.setGrid(this.grid),this.mySolver.setNetlistInfo(this.result),this.mySolver.restart(),this.updateGUI()):console.log("please select a netlist")},n.reload=function(t,e){this.preClick(),this.reload_solver(t,e),0!=this.startFlag?this.restart():console.log("please select a netlist")},n.reload_solver=function(t,e){void 0===e&&(e="lee_moore"),this.mySolver="lee_moore"==e?new y:"a_algorithm"==e?new I:"a_algorithm_v2"==e?new _:new v,this.SolverName.string=e},n.step=function(){this.preClick(),0!=this.startFlag?(this.mySolver.step(),this.updateGUI()):console.log("please select a netlist")},n.routeAll=function(){this.preClick(),0!=this.startFlag?(this.mySolver.routeAll(),this.updateGUI()):console.log("please select a netlist")},n.route=function(){this.preClick(),0!=this.startFlag?(this.mySolver.route(),this.updateGUI()):console.log("please select a netlist")},n.showStats=function(){this.startFlag?(this.StatUI.children[0].getComponent(g).string=this.mySolver.getInformationString(),this.StatUI.active=!this.StatUI.active):console.log("load netlist first")},n.updateGUI=function(){this.grid=this.mySolver.getGrid(),this.GridBox.getComponent("netlist_grid").render(this.grid,this.mySolver.getGridIntermediate())},n.loadCustomNetlist=function(){this.playIconFlag=!0;try{console.log(this.CustomNetlistUI.getComponent(g));var t=d(this.CustomNetlistUI.getComponent(g).string,"custom");if(console.log(t),isNaN(t.wires_size)||isNaN(t.obstructions_size))return;this.processNetlist(t)}catch(t){}},n.processNetlist=function(t){var e=this;e.result=t,e.grid=f(t),this.GridBox.getComponent("netlist_grid").initGrid(e.grid),this.mySolver.setGrid(e.grid),this.mySolver.setNetlistInfo(e.result),this.mySolver.restart(),this.updateGUI(),this.startFlag=1,this.NetlistName.string=this.netlist_name,this.LoadingIcon.getComponent(c).color=new u(255,255,255,0),this.playIconFlag=!1},n.loadNetlist=function(t,e){var i=this;this.preClick(),this.playIconFlag=!0,this.netlist_name=e;var o=this;p.load(e,(function(t,e){i.playIconFlag=!0,o.result=d(e._file,i.netlist_name),o.processNetlist(o.result)}))},e}(m)).prototype,"GridBox",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(G.prototype,"SolverName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(G.prototype,"NetlistName",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(G.prototype,"LoadingIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(G.prototype,"StatUI",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(G.prototype,"CustomNetlistUI",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=G))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/netlist_grid.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,a,s,l,c,d,u,h,p,f,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Prefab,l=e.Node,c=e.UITransform,d=e.Vec3,u=e.instantiate,h=e.Size,p=e.Color,f=e.Sprite,g=e.Label,b=e.Component}],execute:function(){var v,w,m,k,_,y,C;o._RF.push({},"3045f1TIn1F04J+qhAaHeUv","netlist_grid",void 0);var z=a.ccclass,P=a.property;e("netlist_grid",(v=z("netlist_grid"),w=P(s),m=P(l),v((y=t((_=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"GridPrefab",y,i(t)),r(t,"Netlist",C,i(t)),t}n(t,e);var o=t.prototype;return o.auto_rescale=function(){var e=360/this.node.getComponent(c).contentSize.x,t=new d(e,e,1);this.node.getParent().scale=t,this.Netlist.position=new d(0,120,0)},o.start2=function(){},o.initGrid=function(e){var t=e[0].length,n=e.length;this.node.removeAllChildren();for(var r=0;r<t;r++)for(var i=0;i<n;i++){var o=u(this.GridPrefab);o.name=String(r)+"_"+String(i),this.node.addChild(o)}console.log(this.node),this.node.getComponent(c).setContentSize(new h(20*t,20)),this.auto_rescale(),console.log("complete init grid")},o.render=function(e,t){for(var n=e[0].length,r=e.length,i=0;i<r;i++)for(var o=0;o<n;o++){var a=e[i][o],s=this.node.children[i*n+o],l=void 0;switch(a){case-1:l=new p(255,0,0);break;case 0:l=new p(255,255,255);break;case 1:l=new p(237,90,101);break;case 2:l=new p(129,60,133);break;case 3:l=new p(39,117,182);break;case 4:l=new p(69,183,135);break;case 5:l=new p(241,202,23);break;case 6:l=new p(250,93,25);break;case 7:l=new p(175,46,43);break;case 8:l=new p(222,146,43);break;default:l=new p(a/15*255,a/15*255,a/15*255)}s.children[0].getComponent(f).color=l,0!=t[i][o]&&-1!=t[i][o]?s.children[1].getComponent(g).string=t[i][o]:s.children[1].getComponent(g).string=""}},o.update=function(e){},t}(b)).prototype,"GridPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(_.prototype,"Netlist",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=_))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/netlist_ui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,s,r,l,c,u,a,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.Node,c=t.input,u=t.Input,a=t.Vec3,p=t.Component}],execute:function(){var h,f,T,y,v;s._RF.push({},"7b289+CmMZHOYa4ioYGJbcK","netlist_ui",void 0);var _=r.ccclass,d=r.property;t("netlist_ui",(h=_("netlist_ui"),f=d(l),h((v=i((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(i,"Netlist",v,o(i)),i}e(i,t);var s=i.prototype;return s.start=function(){},s.onLoad=function(){c.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(u.EventType.TOUCH_START,this.onTouchStart,this)},s.onDestroy=function(){c.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),c.off(u.EventType.TOUCH_START,this.onTouchStart,this)},s.onTouchMove=function(t){var i=new a(t.getDeltaX(),t.getDeltaY(),0);i.multiplyScalar(.2),this.Netlist.position=this.Netlist.position.add(i)},s.onTouchStart=function(t){},s.update=function(t){},s.onSizeUp=function(){this.Netlist.scale=this.Netlist.scale.multiplyScalar(1.2)},s.onSizeDown=function(){this.Netlist.scale=this.Netlist.scale.multiplyScalar(.8)},s.onAuto=function(){this.Netlist.children[1].getComponent("netlist_grid").auto_rescale()},i}(p)).prototype,"Netlist",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=y))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/parser.ts",["cc"],(function(r){"use strict";var s;return{setters:[function(r){s=r.cclegacy}],execute:function(){r("parse",(function(r,s){void 0===s&&(s="");var t=r.split("\n"),e=t[0].split(" ");e=[parseInt(e[0]),parseInt(e[1])];for(var n=parseInt(t[1]),p=[],a=0;a<n;a++){var i=t[2+a].split(" ");i=[parseInt(i[0]),parseInt(i[1])],p.push(i)}for(var u=parseInt(t[2+n]),c=[],o=0;o<u;o++){for(var v=t[2+n+1+o].split(" "),I=parseInt(v[0]),f=[],l=0;l<I;l++){var _=[parseInt(v[1+2*l+0]),parseInt(v[1+2*l+1])];f.push(_)}c.push(f)}return{grid_size:e,obstructions:p,wires:c,obstructions_size:n,wires_size:u,name:s}})),s._RF.push({},"12c7fuyQi9N/qEkbIZYY8pj","parser",void 0),s._RF.pop()}}}));

System.register("chunks:///_virtual/solver.ts",["cc","./common.ts"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.cclegacy},function(t){e=t.STATES}],execute:function(){i._RF.push({},"eded3wuGkVPMZNAy0uZr0ii","solver",void 0);t("solver",function(){function t(){this.grid=void 0,this.netlist_info=void 0,this.grid_intermediate=void 0,this.grid_backup=void 0,this.state=void 0,this.currentSource=[],this.currentTarget=[],this.currentWire=void 0,this.currentRoute=void 0,this.all_routes=[],this.routing_order=[],this.expansion_list=[],this.reroute_attempts=0,this.failed_routes=[],this.step_number=void 0,this.ripup_flag=!0,this.insink_route_flag=!1,this.best_order=void 0,this.failed_routes_count=99999999999,this.cached_information=void 0,this.step_counter=[],this.wire_length_counter=[],this.MAX_REROUTE_ATTEMPTS=5}var i=t.prototype;return i.reload_routes=function(){if(this.routing_order=[],this.all_routes=[],this.failed_routes_count=99999999999,this.insink_route_flag)for(var t=0;t<this.netlist_info.wires.length;t++)for(var i=0;i<this.netlist_info.wires[t].length;i++)for(var e=i+1;e<this.netlist_info.wires[t].length;e++){var r=t,s=e,n=this.netlist_info.wires[t][i],o=this.netlist_info.wires[t][e];this.all_routes.push([r,s,n,o]),this.routing_order.push(this.all_routes.length-1)}else for(var h=0;h<this.netlist_info.wires.length;h++)for(var u=1;u<this.netlist_info.wires[h].length;u++){var a=h,l=u,_=this.netlist_info.wires[h][0],d=this.netlist_info.wires[h][u];this.all_routes.push([a,l,_,d]),this.routing_order.push(this.all_routes.length-1)}this.currentRoute=0},i.setRipup=function(t){this.ripup_flag=t},i.setInsinkRouting=function(t){this.insink_route_flag=t},i.ripup_step=function(){if(this.reroute_attempts++,this.reroute_attempts>this.MAX_REROUTE_ATTEMPTS)return!0;if(this.failed_routes.length>0){for(var t=[],i=0;i<this.failed_routes.length;i++){var e=this.routing_order[this.failed_routes[i]];t.push(e)}for(var r=0;r<this.routing_order.length;r++){for(var s=this.routing_order[r],n=!1,o=0;o<this.failed_routes.length;o++)if(this.routing_order[this.failed_routes[o]]==s){n=!0;break}n||t.push(s)}return this.routing_order=t,!1}return!0},i.saveRoutingOrder=function(){this.best_order=this.getEmptyArray();for(var t=this.grid[0].length,i=this.grid.length,e=0;e<i;e++)for(var r=0;r<t;r++)this.best_order[e][r]=this.grid[e][r];this.cached_information="",this.cached_information=this.getInformationString()},i.loadBestRoutingOrder=function(){for(var t=this.grid[0].length,i=this.grid.length,e=0;e<i;e++)for(var r=0;r<t;r++)this.grid[e][r]=this.best_order[e][r]},i.failed_path_step=function(){this.failed_routes.push(this.currentRoute)},i.isPausedState=function(){return this.state==e.END||this.state==e.RIPUP_WIRES},i.route=function(){this.step();for(var t=this.currentRoute;t==this.currentRoute;){if(this.isPausedState())return;this.step()}},i.routeAll=function(){for(;this.state!=e.END;)this.step();this.step()},i.getGridIntermediate=function(){return this.grid_intermediate},i.emptyIntermediateGrid=function(){for(var t=[],i=this.getGrid(),e=i[0].length,r=i.length,s=0;s<r;s++){for(var n=[],o=0;o<e;o++)n.push(0);t.push(n)}this.grid_intermediate=t},i.clearIntermediateGrid=function(){for(var t=[],i=this.getGrid(),e=i[0].length,r=i.length,s=0;s<r;s++){for(var n=[],o=0;o<e;o++)n.push(i[s][o]);t.push(n)}this.grid_intermediate=t},i.syncIntermediate2Grid=function(){for(var t=this.getGrid(),i=t[0].length,e=t.length,r=0;r<e;r++)for(var s=0;s<i;s++)this.grid[r][s]=this.grid_intermediate[r][s]},i.getEmptyArray=function(){for(var t=[],i=this.grid[0].length,e=this.grid.length,r=0;r<e;r++){for(var s=[],n=0;n<i;n++)s.push(0);t.push(s)}return t},i.setGrid=function(t){this.grid=t,this.grid_backup=this.getEmptyArray();for(var i=t[0].length,e=t.length,r=0;r<e;r++)for(var s=0;s<i;s++)this.grid_backup[r][s]=t[r][s];this.clearIntermediateGrid()},i.resetGrid=function(){for(var t=this.grid[0].length,i=this.grid.length,e=0;e<i;e++)for(var r=0;r<t;r++)this.grid[e][r]=this.grid_backup[e][r]},i.getGrid=function(){return this.grid},i.setNetlistInfo=function(t){this.netlist_info=t},i.restart=function(){this.state=e.START,this.resetGrid(),this.clearIntermediateGrid(),this.reload_routes(),this.step_counter=[],this.wire_length_counter=[];for(var t=0;t<this.all_routes.length;t++)this.step_counter.push(0),this.wire_length_counter.push(0);this.reroute_attempts=0,this.displayGridSourceSink(),this.cached_information=""},i.step=function(){switch(this.state){case e.RIPUP_WIRES:this.failed_routes.length<this.failed_routes_count&&(this.saveRoutingOrder(),this.failed_routes_count=this.failed_routes.length),console.log("RIPUPWIRES: FAILED ROUTES: ",this.failed_routes.length," \t",this.failed_routes_count),console.log(this.cached_information);var t=this.ripup_step();this.state=t?e.PRE_END:e.RE_ROUTE_WIRES;break;case e.START:this.reload_routes();case e.RE_ROUTE_WIRES:this.failed_routes=[],this.step_counter=[],this.wire_length_counter=[];for(var i=0;i<this.all_routes.length;i++)this.step_counter.push(0),this.wire_length_counter.push(0);this.resetGrid(),this.currentRoute=0;case e.SELECT_NEW_ROUTE:if(this.currentRoute>=this.all_routes.length)console.log("Done 1 round"),this.ripup_flag?this.state=e.RIPUP_WIRES:(this.saveRoutingOrder(),this.state=e.PRE_END);else{var r=this.all_routes[this.routing_order[this.currentRoute]];this.currentWire=r[0],this.currentSource=r[2],this.currentTarget=r[3],this.emptyIntermediateGrid(),this.step_number=1,this.selectnewroute_hook(),this.step_number++,this.state=e.FIND_ROUTE}break;case e.FIND_ROUTE:if(this.findroute_hook(),this.state==e.FIND_ROUTE&&(this.step_number++,0==this.expansion_list.length&&(this.failed_path_step(),this.state=e.SELECT_NEW_ROUTE,this.currentRoute++)),this.state!=e.FIND_ROUTE){for(var s=this.getGrid(),n=s[0].length,o=s.length,h=0,u=0;u<o;u++)for(var a=0;a<n;a++)this.grid_intermediate[u][a]>0&&h++;this.step_counter[this.routing_order[this.currentRoute]]=h}break;case e.BACKTRACE:this.wire_length_counter[this.routing_order[this.currentRoute]]++,this.backtrace_hook();break;case e.PRE_END:this.state=e.END;case e.END:this.end_hook(),this.loadBestRoutingOrder(),this.displayGridSourceSink()}},i.selectnewroute_hook=function(){},i.findroute_hook=function(){},i.backtrace_hook=function(){},i.end_hook=function(){},i.displayGridSourceSink=function(){for(var t=this.getGrid(),i=t[0].length,e=t.length,r=0;r<e;r++)for(var s=0;s<i;s++)this.grid_intermediate[r][s]=0;for(var n=0;n<this.all_routes.length;n++){var o=this.all_routes[n][1],h=this.all_routes[n][2],u=this.all_routes[n][3];this.grid_intermediate[h[1]][h[0]]="S",this.grid_intermediate[u[1]][u[0]]=o}},i.getInformationString=function(){if(""!=this.cached_information)return this.cached_information;var t="";t+="**DetailedRoutingProgress\n",t+="ID\t\tSource\t\tSink\t\tVisitedTiles\tLength\tRoutable\n",t+="-------------------------------------------------------------------------------------------------------------------------------\n";for(var i=0,e=0,r=0,s=0,n=0,o=0,h=0;h<this.all_routes.length;h++)t+=String(h+1)+"\t\t"+this.all_routes[h][2]+"\t\t"+this.all_routes[h][3]+"\t\t"+this.step_counter[h]+"\t\t"+String(this.wire_length_counter[h]+1)+"\t\t"+this.isRoutable(h)+"\n",i+=this.step_counter[h],e+=this.wire_length_counter[h]+1,r+=this.isRoutable(h),s+=this.step_counter[h],n+=this.wire_length_counter[h]+1,o+=this.isRoutable(h),h!=this.all_routes.length-1&&1!=this.all_routes[h+1][1]||(t+="*Net"+this.all_routes[h][0]+"\t\t..\t\t..\t\t"+s+"\t\t"+n+"\t\t"+o+"\n",s=0,n=0,o=0);return t+="-------------------------------------------------------------------------------------------------------------------------------\n",t+="**Total\t\t..\t\t..\t\t"+i+"\t\t"+e+"\t\t"+r+"\n",t+="\n**NetlistInformation\n",t+="NetlistFile\t"+this.netlist_info.name+"\n",t+="CompletedRoutes\t"+this.currentRoute+"\n",t+="FailedRoutes\t"+this.failed_routes.length+"\n",t+="TotalRoutes\t"+this.all_routes.length+"\n",t+="TotalWireNets\t"+this.netlist_info.wires.length+"\n",t+="RouteInterSinks\t"+this.insink_route_flag+"\n",t+="Total Reroutes\t"+this.reroute_attempts+"\n",t+="\n**SolverInformation\n",t+="SolverType\t"+this.getName()+"\n",t+="RipupMode\t"+this.ripup_flag+"\n"},i.isRoutable=function(t){return this.wire_length_counter[t]>0?1:0},i.getName=function(){return"GenericSolver"},t}());i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});